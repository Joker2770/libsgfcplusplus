<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libsgfc++: Project notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libsgfc++<span id="projectnumber">&#160;2.0.0</span>
   </div>
   <div id="projectbrief">A C++ library that uses SGFC to read and write SGF (Smart Game Format) data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Project notes</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md55"></a> This file contains assorted project notes for which there is no better home.</p>
<h1><a class="anchor" id="autotoc_md56"></a>
Two project names: libsgfc++ and libsgfcplusplus</h1>
<p>The official project name is libsgfc++. Please use the official name whenever possible, but at least in human-readable content.</p>
<p>The project's alternative name is libsgfcplusplus. Use the alternative name if the "+" characters in the official name might cause technical problems. For example GitHub does not allow "+" characters in a repository name.</p>
<p>libsgfc++ strives to be platform-independent. To minimize the risk of causing obscure technical issues on some platform the project uses "plusplus" instead of "++" in file names (e.g. source files, build artifacts).</p>
<h1><a class="anchor" id="autotoc_md57"></a>
The export header file</h1>
<h2><a class="anchor" id="autotoc_md58"></a>
Basics</h2>
<p>Symbol visibility when building the library and consuming the library is controlled by preprocessor magic hidden in the export header file <code>SgfcPlusPlusExport.h</code>. This file is conveniently generated by the CMake build system because it's a huge pain to write such a file correctly for many platforms and compilers.</p>
<p>All of the project's public header files that define symbols with visibility (e.g. classes) contain the following pattern:</p>
<div class="fragment"><div class="line">// Project includes (generated)</div>
<div class="line">#include &quot;SgfcPlusPlusExport.h&quot;</div>
<div class="line"> </div>
<div class="line">[...]</div>
<div class="line"> </div>
<div class="line">class SGFCPLUSPLUS_EXPORT SgfcFoo</div>
<div class="line"> </div>
<div class="line">[...]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md59"></a>
Include directory</h2>
<p>CMake generates the export header file in the out-of-source build tree. So how does the <code>#include</code> statement in the snippet above find the header file? The solution is that the CMake targets are configured with a special search path that points to the folder where the export header file was generated.</p>
<p>Example:</p>
<div class="fragment"><div class="line">target_include_directories (</div>
<div class="line">  ${SHARED_OBJECT_LIBRARY_TARGET_NAME}</div>
<div class="line">  PUBLIC</div>
<div class="line">  &quot;$&lt;BUILD_INTERFACE:${EXPORT_HEADER_FILE_FOLDER}&gt;&quot;   &lt;&lt;&lt; This is for the library build</div>
<div class="line">  &quot;$&lt;INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}&gt;&quot;</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
Angle syntax vs. quotes syntax when including</h2>
<p>When an included file is intended to be found via an include directory and not in a location relative to the including file, the <code>#include</code> statement should use the "angle bracket" syntax: </p><pre class="fragment">#include &lt;SgfcPlusPlusExport.h&gt;
</pre><p> As we have seen, however, the source code uses the "quotes" syntax: </p><pre class="fragment">#include "SgfcPlusPlusExport.h"
</pre><p> The reason is that when the library is built and installed the export header file is installed alongside with the other public header files. So in the final installation path the export header file loses its special designation as a generated file and becomes just another public API header file that resides in the same folder as its companions. In this context an <code>#include</code> statement using "quotes" syntax is the correct choice.</p>
<p>Using the "quotes" syntax is not just a matter of taste. Let's look at it from the side of a consumer of the library. Because the library installs its public headers in a subfolder <code>libsgfcplusplus</code> in the install prefix (e.g. <code>/usr/local/include</code>), a consumer is likely to write this statement to include one of the library's public header files: </p><pre class="fragment">#include &lt;libsgfcplusplus/SgfcPlusPlusFactory.h&gt;
</pre><p> This works fine because the compiler is bound to have an include directory pointing to the install prefix (<code>/usr/local/include</code>). Now if <code><a class="el" href="_sgfc_plus_plus_factory_8h_source.html">SgfcPlusPlusFactory.h</a></code> were to use the "angle bracket" syntax to include the export header file, compilation would be extremely likely to fail, because the compiler has no include directory pointing to the <code>libsgfcplusplus</code> subfolder and therefore has no chance to find the export header file.</p>
<p>Going back to the point of view of building the library, compilation in that scenario is much more likely to succeed: The first attempt by the compiler to locate the export header file in the same folder as the including file fails. The compiler can then still fall back to look for the file in the specified include directories. The project relies on all supported platform's compilers to perform such a fall back search. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
