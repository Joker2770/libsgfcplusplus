<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libsgfc++: Release steps</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libsgfc++<span id="projectnumber">&#160;2.0.0</span>
   </div>
   <div id="projectbrief">A C++ library that uses SGFC to read and write SGF (Smart Game Format) data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Release steps</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md61"></a> This document lists the steps needed to make a project release.</p>
<h1><a class="anchor" id="autotoc_md62"></a>
Before the release</h1>
<p>Things that need to be done before the actual release can take place:</p>
<ul>
<li>Create a release branch. All remaining work will be done in this branch. Command: <code>git checkout -b release-0.1.0 develop</code></li>
<li>Run Xcode's analyze tool and fix all problems that are reported (except those reported for SGFC source code).</li>
<li>Run a CI build and fix all errors (hopefully none) and warnings that are reported on all platforms.</li>
<li>Make sure that the issues in the bugtracker are up to date</li>
<li>If SGFC has been updated<ul>
<li>Make sure that the version number in <code>SgfcConstants::SgfcVersion</code> is up to date.</li>
<li>Make sure that the license information in <code>README.md</code> and in the <code>NOTICE</code> file is up to date.</li>
<li>Make sure to read the relevant release notes.</li>
</ul>
</li>
<li>Make sure that no debugging stuff has been forgotten in the code (e.g. search for "xxx")</li>
<li>Update <code>ChangeLog.md</code><ul>
<li>The main source for this are the issues on the bug tracker.</li>
<li>The git commit log may also have useful information.</li>
</ul>
</li>
<li>Make sure that the version number is up to date in the following places:<ul>
<li><code>SgfcConstants::LibraryVersion</code></li>
<li><code>CMakeLists.txt</code> (the main file in the project root)</li>
</ul>
</li>
<li>Make sure that the copyright year is up to date in the following files (e.g. 2020-2021 instead of 2020):<ul>
<li><code>NOTICE</code></li>
<li>All source files that were touched since the last release. For instance, to list all files that were touched since the release 0.1 and were not updated to the current year 2021: <code>git diff --name-only 0.1 | egrep "^(example|include|src|test)" | sort | uniq | xargs grep "// Copyright" 2&gt;/dev/null | grep -v 2021 | cut -d":" -f1</code></li>
</ul>
</li>
<li>Remove the build directory to make sure that subsequent test and distribution builds are clean: <code>rm -rf build</code></li>
<li>Commit final changes (check with <code>git status</code> that nothing was forgotten).</li>
</ul>
<h1><a class="anchor" id="autotoc_md63"></a>
Create artifacts</h1>
<h2><a class="anchor" id="autotoc_md64"></a>
Create an archive</h2>
<p>GitHub can generate a .zip file on demand from any commit in the repository history. It therefore does not make sense to upload a tar ball and waste space.</p>
<h2><a class="anchor" id="autotoc_md65"></a>
Generate and publish API documentation</h2>
<p>Step-by-step instructions to generate and publish the API documentation.</p>
<div class="fragment"><div class="line">cd build</div>
<div class="line"> </div>
<div class="line"># Cleanup from a previous build</div>
<div class="line">rm -rf doc/html</div>
<div class="line"> </div>
<div class="line"># Regenerate docs from scratch</div>
<div class="line">cmake --build . --target libsgfcplusplus-doc</div>
<div class="line">git checkout gh-pages</div>
<div class="line"> </div>
<div class="line"># Remove documentation from previous release</div>
<div class="line">rm -rf ../api-docs</div>
<div class="line"> </div>
<div class="line"># Add documentation from new release</div>
<div class="line">cp -Rp doc/html ../api-docs</div>
<div class="line"> </div>
<div class="line">git add ../api-docs</div>
<div class="line">git commit -m &quot;add API docs for version 0.1&quot;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md66"></a>
Make the release</h1>
<ul>
<li>Merge all changes in the release branch into <code>develop</code><ul>
<li><code>git checkout develop</code></li>
<li><code>git merge release-0.1.0</code></li>
</ul>
</li>
<li>Merge all changes in the release branch into <code>master</code><ul>
<li><code>git checkout master</code></li>
<li><code>git merge develop</code></li>
</ul>
</li>
<li>Tag and sign the release<ul>
<li><code>git tag -s -m "tagging release x.y" x.y &lt;commit hash&gt;</code></li>
</ul>
</li>
<li>Update the GitHub repository<ul>
<li><code>git push</code></li>
<li><code>git push --tags</code></li>
</ul>
</li>
<li>Remove the release branch, both locally and, if it was pushed, on GitHub</li>
<li>Close tickets that are not yet closed in the issue tracker, then close the milestone</li>
<li>Create a new release on GitHub that references the git tag. Copy ChangeLog content into the release description. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
